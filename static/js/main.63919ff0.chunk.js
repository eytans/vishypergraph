(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,t,n){e.exports=n(290)},140:function(e,t,n){},141:function(e,t,n){},290:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),s=n(125),a=n.n(s),o=(n(140),n(13)),l=n(18),c=n(47),u=n(44),d=n(46),h=(n(141),n(292)),p=n(293),f=n(131),v=n(295),g=n(294),y=n(133),x=n(134),b=n(126),m=n(127),j=n.n(m),k=function(){function e(t,n){Object(o.a)(this,e),this.id=void 0,this.label=void 0,this.id=t,this.label=n}return Object(l.a)(e,[{key:"toString",value:function(){return null==this.label?this.id.toString():this.label}}]),e}(),w=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ellipse";Object(o.a)(this,e),this.id=void 0,this.literal=void 0,this.shape=void 0,this.id=t,this.literal=n,this.shape=r}return Object(l.a)(e,[{key:"toVisNode",value:function(){return{id:this.id.id,shape:this.shape,label:void 0!==this.literal?this.literal:this.id.toString()}}}]),e}(),O=function e(t,n){Object(o.a)(this,e),this.type=void 0,this.sources=void 0,this.type=t,this.sources=n},E={hasTarget:!0,layout:{hierarchical:!1},edges:{color:"#000000"},nodes:{margin:10}},I=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).options=void 0,n.hasTarget=void 0,n.events={select:function(e){e.nodes,e.edges}};var r=Object(x.a)({},E,e.options),i=r.hasTarget,s=Object(b.a)(r,["hasTarget"]);return n.hasTarget=i,n.options=s,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=Math.max.apply(Math,Object(y.a)(this.props.nodes.map(function(e){return e.id.id}))),n=this.props.nodes.map(function(e,t,n){return e.toVisNode()}),r=[],s=!0,a=!1,o=void 0;try{for(var l,c=this.props.edges[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value,d=new w(new k(t+=1),u.type,"box");n.push(d.toVisNode()),r=r.concat(u.sources.map(function(t,n){return e.hasTarget&&0===n?{to:t.id,from:d.id.id}:{from:t.id,to:d.id.id,label:"arg "+n}}))}}catch(p){a=!0,o=p}finally{try{s||null==c.return||c.return()}finally{if(a)throw o}}var h={nodes:n,edges:r};return i.a.createElement(j.a,{graph:h,options:this.options,events:this.events})}}]),t}(r.Component),H=n(128),T=n(129),S=n.n(T),C=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).textRef=void 0,n.textRef=i.a.createRef(),n.state={nodes:[],edges:[]},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"parseText",value:function(e,t){var n=Object(H.generate)('\n    expression = exp:smallerexpression "{" exps:expressionlist "}" { return {type: \'tree\', root:exp, subtrees: exps} } \n    / smallerexpression\n    \n    smallerexpression = root:identifier _ "(" exps:expressionlist ")" {\n      var res = {type: \'node\'};\n      res[root[\'value\']] = exps;\n      return  res;\n    }\n    / number\n    / identifier \n    \n    expressionlist =  _ exp:expression? exps:( _ "," _ expression _ )* {\n        if (exp === null) return [];\n        else if (exps.length === 0) return exp;\n        else return [exp].concat(exps.map(function(a){ return a[3] }))\n      }\n    \n    identifier = lets:([^(),])+ {return {type: \'identifier\', value:lets.join("")}}\n    \n    number = digits:[0-9]+ {return {type: \'number\', value:parseInt(digits.join(""), 10)}}\n    \n    _  = [ \\t\\r\\n]*'),r=new S.a(e),i=null;try{i=n.parse(e,{tracer:r})}catch(s){console.log(s),console.log(r.getBacktraceString())}return console.log(i),i}},{key:"getEdges",value:function(e){var t=Object.keys(e).find(function(e){return e.toLowerCase().includes("hypergraph")});if(void 0===t)throw new Error("bla");return console.log(t),Array.isArray(e[t].Set)?e[t].Set.map(function(e){return e.HyperEdge}):[e[t].Set.HyperEdge]}},{key:"extractId",value:function(e){var t=null,n=-9999;if(Object.keys(e).includes("Explicit"))n=e.Explicit.HyperTermId.value,t="Explicit";else if(Object.keys(e).includes("Hole"))n=e.Hole.value,t="Hole";else{if(!Object.keys(e).includes("Ignore"))return new k(e.HyperTermId.value);t="Ignore"}return new k(n,t+"("+n+")")}},{key:"extractIdentifier",value:function(e){return Object.keys(e).includes("Explicit")?e.Explicit.HyperTermIdentifier.Identifier[0].value:Object.keys(e).includes("Hole")?"Hole("+e.Hole.value+")":Object.keys(e).includes("Ignore")?"Ignore":e.HyperTermIdentifier.Identifier[0].value}},{key:"parseEdge",value:function(e){var t=this.extractIdentifier(e[1]),n=[this.extractId(e[0])],r=e[2].List;return r=void 0===r?[]:Array.isArray(r)?r.map(this.extractId):[this.extractId(r)],new O(t.toString(),n.concat(r))}},{key:"handleClick",value:function(e){var t=this;console.log("You clicked!!!");var n=this.textRef.current.value;if("string"===typeof n){var r=this.parseText(n),i=this.getEdges(r).map(function(e){return t.parseEdge(e)}),s=new Map(i.flatMap(function(e){return console.log(e.sources),e.sources.map(function(e){return[e.id,new w(e)]})}));console.log(i),console.log(s),this.setState({nodes:Array.from(s.values()),edges:i})}}},{key:"render",value:function(){return i.a.createElement(h.a,{style:{height:"100vh",minHeight:"100vh"}},i.a.createElement(p.a,null,i.a.createElement(f.a,null,i.a.createElement(v.a,{onClick:this.handleClick.bind(this)},"Draw Graph!"),i.a.createElement(g.a.Control,{ref:this.textRef,style:{width:"75vh"},type:"text",placeholder:"Enter hyper graph text"}))),i.a.createElement(p.a,{style:{height:"100%"}},i.a.createElement(I,{edges:this.state.edges,nodes:this.state.nodes})))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[135,1,2]]]);
//# sourceMappingURL=main.63919ff0.chunk.js.map