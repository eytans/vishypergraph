{"version":3,"sources":["HyperGraph.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["ID","id","label","Object","classCallCheck","this","createClass","key","value","toString","Node","literal","shape","arguments","length","undefined","HyperEdge","type","sources","optionsDefault","hasTarget","layout","hierarchical","edges","color","nodes","margin","HyperGraph","_Component","props","_this","possibleConstructorReturn","getPrototypeOf","call","options","events","select","event","_optionsDefault$props","objectSpread","objectWithoutProperties","inherits","_this2","maxId","Math","max","apply","toConsumableArray","map","index","array","toVisNode","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","edge","newNode","push","concat","to","from","err","return","graph","react_default","a","createElement","vis_react_default","Component","App","textRef","React","createRef","state","text","isPattern","parser","generate","tracer","Tracer","tree","parse","e","console","log","getBacktraceString","graphkey","keys","find","element","toLowerCase","includes","Error","Array","isArray","hyperTermId","hyperTermIdentifier","eType","extractIdentifier","target","extractId","current","parseText","getEdges","parseEdge","Map","flatMap","f","setState","values","Container","style","height","minHeight","Row","Col","Button","onClick","handleClick","bind","Form","Control","ref","width","placeholder","HyperGraph_HyperGraph","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.63919ff0.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport Graph from 'vis-react'\r\n\r\ninterface VisNode {\r\n    id: number;\r\n    label: string;\r\n    shape?: string;\r\n}\r\n\r\ninterface VisEdge {\r\n    from: number;\r\n    to: number;\r\n}\r\n\r\nexport class ID {\r\n    id: number;\r\n    label?: string;\r\n\r\n    constructor(id: number, label?: string) {\r\n        this.id = id;\r\n        this.label = label;\r\n    }\r\n\r\n    toString() {\r\n        if (this.label == null) {\r\n            return this.id.toString();\r\n        }\r\n        return this.label;\r\n    }\r\n}\r\n\r\nexport class Node {\r\n    id: ID;\r\n    literal?: string;\r\n    shape?: string;\r\n\r\n    constructor(id: ID, literal?: string, shape = \"ellipse\") {\r\n        this.id = id;\r\n        this.literal = literal;\r\n        this.shape = shape;\r\n    }\r\n\r\n    toVisNode(): VisNode {\r\n        return {id: this.id.id, shape: this.shape, label: this.literal !== undefined ? this.literal : this.id.toString()}\r\n    }\r\n}\r\n\r\nexport class HyperEdge {\r\n    type: string;\r\n    sources: ID[];\r\n\r\n    constructor(type: string, sources: ID[]) {\r\n        this.type = type;\r\n        this.sources = sources;\r\n    }\r\n}\r\n\r\ninterface HyperGraphProps {\r\n    nodes: Node[];\r\n    edges: HyperEdge[];\r\n    options?: {hasTarget: boolean};\r\n}\r\n\r\nconst optionsDefault = {\r\n    hasTarget: true,\r\n    layout: {\r\n        hierarchical: false\r\n    },\r\n    edges: {\r\n        color: '#000000'\r\n    },\r\n    nodes: {\r\n        margin: 10\r\n    }\r\n};\r\n\r\nexport class HyperGraph extends Component<HyperGraphProps, any> {\r\n    private options: any;\r\n    private hasTarget: boolean;\r\n\r\n    private events = {\r\n        select: function(event: any) {\r\n            var { nodes, edges } = event;\r\n        }\r\n    };\r\n\r\n    constructor(props: HyperGraphProps) {\r\n        super(props);\r\n        const {hasTarget, ...options} = {...optionsDefault, ...props.options};\r\n        this.hasTarget = hasTarget;\r\n        this.options = options;\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        var maxId = Math.max(...this.props.nodes.map((value: Node) => { return value.id.id; }));\r\n\r\n        var nodes: VisNode[] = this.props.nodes.map((value, index, array) => value.toVisNode());\r\n        var edges: VisEdge[] = [];\r\n\r\n        for (var edge of this.props.edges) {\r\n            maxId += 1;\r\n            var newNode = new Node(new ID(maxId), edge.type, \"box\");\r\n            nodes.push(newNode.toVisNode());\r\n            edges = edges.concat(edge.sources.map((value: ID, index: number) => {\r\n                if (this.hasTarget && index === 0) {\r\n                    return {to: value.id, from: newNode.id.id}\r\n                }\r\n                return {from: value.id, to: newNode.id.id, label: \"arg \" + index}\r\n            }));\r\n        }\r\n\r\n        var graph = {\r\n            nodes: nodes,\r\n            edges: edges\r\n        };\r\n\r\n        return (\r\n            <Graph graph={graph} options={this.options}  events={this.events}/>\r\n        );\r\n    }\r\n}","import React, {Component} from 'react';\nimport './App.css';\nimport {Container, Row, Col, Form, Button} from \"react-bootstrap\";\nimport {HyperGraph, Node, HyperEdge, ID} from './HyperGraph'\nimport { generate } from 'pegjs'\nimport Tracer from 'pegjs-backtrace'\nimport {ExecException} from \"child_process\";\n\ninterface AppState {\n  nodes: Node[];\n  edges: HyperEdge[];\n}\n\nexport class App extends Component<Readonly<{}>, AppState> {\n  textRef: any;\n\n  constructor(props: Readonly<{}>) {\n    super(props);\n    this.textRef = React.createRef();\n    this.state = {\n      nodes: [],\n      edges: []\n    }\n  }\n\n  parseText(text: string, isPattern?: boolean): any {\n    let parser = generate(`\n    expression = exp:smallerexpression \"{\" exps:expressionlist \"}\" { return {type: 'tree', root:exp, subtrees: exps} } \n    / smallerexpression\n    \n    smallerexpression = root:identifier _ \"(\" exps:expressionlist \")\" {\n      var res = {type: 'node'};\n      res[root['value']] = exps;\n      return  res;\n    }\n    / number\n    / identifier \n    \n    expressionlist =  _ exp:expression? exps:( _ \",\" _ expression _ )* {\n        if (exp === null) return [];\n        else if (exps.length === 0) return exp;\n        else return [exp].concat(exps.map(function(a){ return a[3] }))\n      }\n    \n    identifier = lets:([^(),])+ {return {type: 'identifier', value:lets.join(\"\")}}\n    \n    number = digits:[0-9]+ {return {type: 'number', value:parseInt(digits.join(\"\"), 10)}}\n    \n    _  = [ \\\\t\\\\r\\\\n]*`);\n    let tracer = new Tracer(text);\n    var tree = null;\n    try {\n      tree = parser.parse(text, {tracer: tracer});\n    } catch (e) {\n      console.log(e);\n      console.log(tracer.getBacktraceString());\n    }\n    console.log(tree);\n    return tree;\n  }\n\n  getEdges(tree: any): Array<any> {\n    // hypergraph(set(h,h,...))\n    var graphkey: string|undefined = Object.keys(tree).find(function(element: string) {\n      return element.toLowerCase().includes('hypergraph');\n    });\n\n    if (graphkey === undefined) {\n      throw new Error('bla');\n    }\n\n    console.log(graphkey);\n    if (Array.isArray(tree[graphkey]['Set'])) return tree[graphkey]['Set'].map((e: any) => e['HyperEdge']);\n    return [tree[graphkey]['Set']['HyperEdge']];\n  }\n\n  extractId(hyperTermId: any) {\n    var label = null;\n    var value = -9999;\n    if (Object.keys(hyperTermId).includes('Explicit')) {\n      value = hyperTermId['Explicit']['HyperTermId']['value'];\n      label = 'Explicit';\n    } else if (Object.keys(hyperTermId).includes('Hole')) {\n      value = hyperTermId['Hole']['value'];\n      label = 'Hole';\n    } else if (Object.keys(hyperTermId).includes('Ignore')){\n      label = 'Ignore';\n    }\n    else return new ID(hyperTermId['HyperTermId']['value']);\n\n    return new ID(value, label + '(' + value + ')');\n  }\n\n  extractIdentifier(hyperTermIdentifier: any) {\n    if (Object.keys(hyperTermIdentifier).includes('Explicit')) {\n      return hyperTermIdentifier['Explicit']['HyperTermIdentifier']['Identifier'][0]['value'];\n    } else if (Object.keys(hyperTermIdentifier).includes('Hole')) {\n      return \"Hole(\" + hyperTermIdentifier['Hole']['value'] + \")\";\n    } else if (Object.keys(hyperTermIdentifier).includes('Ignore')) {\n      return  'Ignore';\n    } else return hyperTermIdentifier['HyperTermIdentifier']['Identifier'][0]['value'];\n  }\n\n  parseEdge(edge: any) {\n    var eType = this.extractIdentifier(edge[1]);\n    var target = [this.extractId(edge[0])];\n    var sources = edge[2]['List'];\n    if (sources === undefined) sources = [];\n    else if (Array.isArray(sources))\n      sources = sources.map(this.extractId);\n    else sources = [this.extractId(sources)];\n    return new HyperEdge(eType.toString(), target.concat(sources));\n  }\n\n  handleClick(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    console.log(\"You clicked!!!\");\n    let text = this.textRef.current.value;\n    if (typeof text === 'string') {\n      var tree = this.parseText(text);\n      var edges = this.getEdges(tree).map(e => this.parseEdge(e));\n      var nodes = new Map<number, Node>(edges.flatMap(function (e: HyperEdge) {\n        console.log(e.sources);\n        return e.sources.map(f => [f.id, new Node(f)])\n      }));\n      console.log(edges);\n      console.log(nodes);\n      this.setState({nodes: Array.from(nodes.values()), edges: edges})\n    }\n  }\n\n  render() {\n    return (\n    <Container style={{height: '100vh', 'minHeight': '100vh'}}>\n      <Row>\n        <Col><Button onClick={this.handleClick.bind(this)}>Draw Graph!</Button>\n        <Form.Control ref={this.textRef} style={{width: '75vh'}} type=\"text\" placeholder=\"Enter hyper graph text\"/></Col>\n      </Row>\n      <Row style={{height: '100%'}}>\n        <HyperGraph\n            edges={this.state.edges}\n            nodes={this.state.nodes}/>\n      </Row>\n    </Container>);\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}